<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Learn Loom — Dashboard</title>

  <!-- Plotly for charts -->
  <script src="https://cdn.plot.ly/plotly-2.22.0.min.js"></script>

  <!-- Link to stylesheet (relative path) -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app" class="app">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Main sidebar">
      <div class="brand">
        <div class="logo">LL</div>
        <div class="brand-text">
          <h1>Learn Loom</h1>
          <p>AI · Analytics · Action</p>
        </div>
      </div>

      <nav class="nav" role="navigation" aria-label="Main navigation">
        <button class="nav-btn active" data-target="overview">Overview</button>
        <button class="nav-btn" data-target="trends">Trends</button>
        <button class="nav-btn" data-target="scores">Scores</button>
        <button class="nav-btn" data-target="dropouts">Dropouts</button>
        <button class="nav-btn" data-target="predict">Predictor</button>
      </nav>

      <div class="sidebar-footer">
        <small>Data source: Kaggle / OpenData</small>
        <button id="themeToggle" class="ghost" aria-pressed="false">Toggle theme</button>
      </div>
    </aside>

    <!-- Main area -->
    <main class="main">
      <header class="topbar">
        <div class="search">
          <input id="searchInput" placeholder="Search students, courses or metrics…" />
        </div>
        <div class="top-actions">
          <div class="stat-pill" title="Active users">
            <span class="muted">Active</span>
            <strong id="activeCount">1,254</strong>
          </div>
          <div class="avatar" title="Account">
            <img src="https://i.pravatar.cc/40?img=12" alt="user" />
          </div>
        </div>
      </header>

      <!-- Filter Panel -->
      <section class="filter-panel">
        <div class="filter-group">
          <label for="filter-gender">Gender:</label>
          <select id="filter-gender">
            <option value="">All</option>
            <option value="female">Female</option>
            <option value="male">Male</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="filter-race-ethnicity">Race/Ethnicity:</label>
          <select id="filter-race-ethnicity">
            <option value="">All</option>
            <option value="group A">Group A</option>
            <option value="group B">Group B</option>
            <option value="group C">Group C</option>
            <option value="group D">Group D</option>
            <option value="group E">Group E</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="filter-parental-education">Parental Education:</label>
          <select id="filter-parental-education">
            <option value="">All</option>
            <option value="some high school">Some High School</option>
            <option value="high school">High School</option>
            <option value="some college">Some College</option>
            <option value="associate's degree">Associate's Degree</option>
            <option value="bachelor's degree">Bachelor's Degree</option>
            <option value="master's degree">Master's Degree</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="filter-lunch">Lunch:</label>
          <select id="filter-lunch">
            <option value="">All</option>
            <option value="standard">Standard</option>
            <option value="free/reduced">Free/Reduced</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="filter-test-prep">Test Prep:</label>
          <select id="filter-test-prep">
            <option value="">All</option>
            <option value="none">None</option>
            <option value="completed">Completed</option>
          </select>
        </div>
        <button id="applyFiltersBtn" class="primary">Apply Filters</button>
        <button id="clearFiltersBtn" class="ghost">Clear Filters</button>
      </section>

      <section class="content" id="content">
        <div id="overview-page" class="page active">
          <!-- Top stat cards -->
          <div class="card-row">
            <div class="card small stat-card-clickable" data-metric="completionRate">
              <h3>Completion Rate</h3>
              <div class="big-number" id="completionRate">--</div>
              <div class="card-foot">Overall</div>
            </div>

            <div class="card small stat-card-clickable" data-metric="averageScore">
              <h3>Avg. Score</h3>
              <div class="big-number" id="avgScore">--</div>
              <div class="card-foot">Overall</div>
            </div>

            <div class="card small stat-card-clickable" data-metric="dropoutRate">
              <h3>Dropout Rate</h3>
              <div class="big-number danger" id="dropoutRate">--</div>
              <div class="card-foot">Overall</div>
            </div>

            <div class="card small stat-card-clickable" data-metric="activeStudents">
              <h3>Active Students</h3>
              <div class="big-number" id="activeStudentsCardCount">--</div>
              <div class="card-foot">Currently</div>
            </div>
          </div>

          <!-- AI Insights Card -->
          <div class="card wide ai-insights-card">
            <div class="card-header">
              <h3>AI-Powered Insights</h3>
              <small>Generated by Gemini</small>
            </div>
            <div id="aiInsights" class="ai-insights-content">Loading AI insights...</div>
          </div>

          <!-- Search Results Display -->
          <div id="searchResults" class="card wide" style="display: none;">
            <div class="card-header">
              <h3>Search Results</h3>
            </div>
            <div class="search-results-content">No results yet.</div>
          </div>
        </div>

        <div id="trends-page" class="page">
          <div class="card-row">
            <div class="card wide">
              <div class="card-header">
                <h3>Learning Completion Trend</h3>
                <small>Weekly</small>
                <button class="fullscreen-btn" data-chart-id="chart-completion">Fullscreen</button>
              </div>
              <div id="chart-completion" class="chart-placeholder" role="region" aria-label="Completion trend chart"></div>
            </div>

            <div class="card wide">
              <div class="card-header">
                <h3>Average Scores</h3>
                <small>Per module</small>
                <button class="fullscreen-btn" data-chart-id="chart-scores">Fullscreen</button>
              </div>
              <div id="chart-scores" class="chart-placeholder" role="region" aria-label="Average scores chart"></div>
            </div>
          </div>
        </div>

        <div id="scores-page" class="page">
          <div class="card-row">
            <div class="card wide">
              <div class="card-header">
                <h3>Score Distribution</h3>
                <small>Overall</small>
                <button class="fullscreen-btn" data-chart-id="chart-score-distribution">Fullscreen</button>
              </div>
              <div id="chart-score-distribution" class="chart-placeholder" role="region" aria-label="Score distribution chart"></div>
            </div>

            <div class="card wide">
              <div class="card-header">
                <h3>Performance by Test Preparation</h3>
                <small>Correlation</small>
                <button class="fullscreen-btn" data-chart-id="chart-test-prep">Fullscreen</button>
              </div>
              <div id="chart-test-prep" class="chart-placeholder" role="region" aria-label="Performance by test preparation chart"></div>
            </div>
          </div>
        </div>

        <div id="dropouts-page" class="page">
          <div class="card-row">
            <div class="card wide">
              <div class="card-header">
                <h3>Dropout Patterns</h3>
                <small>By week & cohort</small>
                <button class="fullscreen-btn" data-chart-id="chart-dropout">Fullscreen</button>
              </div>
              <div id="chart-dropout" class="chart-placeholder" role="region" aria-label="Dropout pattern chart"></div>
            </div>
          </div>
        </div>

        <div id="predict-page" class="page">
          <div class="card-row">
            <div class="card narrow">
              <div class="card-header">
                <h3>Completion Predictor</h3>
                <small>Quick score</small>
              </div>

              <div class="predictor">
                <label for="input-hours">Hours watched</label>
                <input id="input-hours" type="number" min="0" value="12" />

                <label for="input-quiz">Average quiz score</label>
                <input id="input-quiz" type="number" min="0" max="100" value="75" />

                <label for="input-days">Days active</label>
                <input id="input-days" type="number" min="0" value="15" />

                <button id="predictBtn" class="primary">Get completion %</button>

                <div id="predictResult" class="predict-result" aria-live="polite">—</div>
              </div>
            </div>
          </div>
        </div>

        <footer class="foot">
          <small>Designed with care · Soft UI · Premium feel</small>
        </footer>
      </section>
    </main>
  </div>

  <!-- Metric Details Modal -->
  <div id="metricDetailsModal" class="modal">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <h2 id="modalTitle"></h2>
      <div id="modalBody"></div>
    </div>
  </div>

  <!-- UI JS (relative path) -->
  <script src="script.js"></script>
</body>
</html>
